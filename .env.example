# ========================================
# Policr Mini 环境变量配置
# ========================================
# 复制此文件为 .env 并填入实际配置值
# 
# 配置优先级：
# 1. 环境变量
# 2. .env 文件
# 3. 默认值

# ========================================
# 核心配置（必需）
# ========================================

# Telegram Bot Token - 从 @BotFather 获取
TG_BOT_TOKEN=

# Bot 管理员的 Telegram 用户 ID
TG_OWNER_ID=

# Phoenix 应用密钥（用于会话加密等）
# 生成命令：mix phx.gen.secret
SECRET_KEY_BASE=

# ========================================
# 数据库配置
# ========================================

# 数据库连接配置
DB_HOST=postgres
DB_PORT=5432
DB_NAME=policr_mini
DB_USER=postgres
DB_PASS=postgres

# 连接池大小（生产环境建议 10-20）
POOL_SIZE=10

# ========================================
# 应用配置
# ========================================

# 应用监听端口
PORT=4000

# 应用域名（生产环境必需）
PHX_HOST=localhost

# 环境模式：dev, test, prod
MIX_ENV=prod

# 日志级别：debug, info, warn, error
LOG_LEVEL=info

# ========================================
# Redis 配置（可选）
# ========================================

# Redis 连接 URL
REDIS_URL=redis://redis:6379/0

# ========================================
# Telegram API 配置（高级）
# ========================================

# 自定义 Telegram API 地址（可选）
# 用于使用本地 Bot API Server
# TG_API_BASE_URL=http://telegram-bot-api:8081

# Telegram API ID 和 Hash（使用本地 Bot API Server 时需要）
# TELEGRAM_API_ID=
# TELEGRAM_API_HASH=

# ========================================
# 监控配置（可选）
# ========================================

# 启用 Prometheus 指标
ENABLE_PROMETHEUS=true

# 启用遥测数据收集
ENABLE_TELEMETRY=true

# Grafana 管理员密码
GRAFANA_PASSWORD=admin

# ========================================
# 功能开关
# ========================================

# 反垃圾功能
ENABLE_ANTI_SPAM=true

# 欢迎消息功能
ENABLE_WELCOME_MESSAGE=true

# 管理命令功能
ENABLE_ADMIN_COMMANDS=true

# ========================================
# ���能优化
# ========================================

# 消息处理并发数
MESSAGE_CONCURRENCY=5

# 消息速率限制（每秒）
MESSAGE_RATE_LIMIT=30

# 缓存 TTL（秒）
CACHE_TTL=3600

# ========================================
# 存储配置
# ========================================

# 上传文件存储路径
UPLOAD_PATH=/app/_assets/uploads

# 静态资源路径
STATIC_PATH=/app/priv/static

# ========================================
# 开发环境配置
# ========================================

# 开发环境 InfluxDB 配置
INFLUXDB_HOST=influxdb
INFLUXDB_PORT=8086
INFLUXDB_TOKEN=dev_token_123
INFLUXDB_ORG=policr_mini
INFLUXDB_BUCKET=policr_mini_dev

# 开发环境邮件配置（使用 MailHog）
SMTP_HOST=mailhog
SMTP_PORT=1025

# ========================================
# Docker 配置
# ========================================

# Docker 镜像名称（用于生产环境）
DOCKER_IMAGE=policr-mini:latest

# 应用副本数（用于负载均衡）
APP_REPLICAS=1

# ========================================
# 备份配置
# ========================================

# 备份保留天数
BACKUP_RETENTION_DAYS=7

# 备份时间（小时，0-23）
BACKUP_HOUR=3